// Generated by CoffeeScript 1.3.3
(function() {
  var fs, mb, mbundle, path, timeLog;

  fs = require('fs');

  path = require('path');

  mb = require('module-bundler');

  mbundle = this.mbundle = typeof exports !== 'undefined' ? exports : {};

  timeLog = function(message) {
    return console.log("" + ((new Date).toLocaleTimeString()) + " - " + message);
  };

  mbundle.run = function() {
    var arg, args, result, _i, _len, _results;
    args = process.argv.slice(2);
    if (!args.length) {
      console.error('mbundle: missing filename');
      process.exit(1);
    }
    _results = [];
    for (_i = 0, _len = args.length; _i < _len; _i++) {
      arg = args[_i];
      result = mb.writeBundlesSync(arg, {
        cwd: fs.realpathSync('.')
      });
      _results.push(timeLog(result ? "mbundle: bundled " + arg : "mbundle: failed to bundle " + arg));
    }
    return _results;
  };

}).call(this);
